plugins {
  id 'org.jetbrains.intellij' version "0.4.10"
}
repositories {
  mavenCentral()
  maven {
    url 'https://dl.bintray.com/jetbrains/intellij-plugin-service'
  }
}

allprojects {
  version '0.03'

  apply plugin: 'java'
  sourceCompatibility = 1.8
  targetCompatibility = 1.8

  sourceSets {
    main {
      java.srcDirs 'main/src'
      resources.srcDirs 'main/resources'
    }
    test {
      java.srcDir 'tests/src'
      resources.srcDirs 'tests/testData'
    }
  }
  apply plugin: 'org.jetbrains.intellij'
  intellij {
    pluginName 'dg-test-helper'
    type 'IC'
    localPath project.properties.get("local.idea")
    alternativeIdePath project.properties.get("local.altIde")
    plugins = ['java', 'DatabaseTools']
  }

  patchPluginXml {
    sinceBuild '193'
    untilBuild '993'
  }
}

publishPlugin {
  username project.properties.get("publish.user")
  token project.properties.get("publish.token")
  channels project.properties.get("publish.channel") ?: "Stable"
}
